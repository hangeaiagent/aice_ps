# AicePS 快速部署指南

## 一键部署脚本

### 本地环境设置
```bash
# 1. 创建 conda 环境
conda create -n AicePS python=3.9 -y
conda activate AicePS

# 2. 安装 Node.js
conda install nodejs=20 -c conda-forge -y

# 3. 克隆项目
git clone https://github.com/hangeaiagent/aice_ps.git
cd aice_ps

# 4. 安装依赖
npm install

# 5. 配置 API 密钥
echo "GEMINI_API_KEY=你的API密钥" > .env

# 6. 启动应用
npm run dev -- --port 8889
```

### 服务器部署
```bash
# 连接服务器
ssh -i /Users/a1/work/productmindai.pem ec2-user@54.89.140.250

# 部署项目
cd /home/ec2-user
rm -rf nanobanana
git clone https://github.com/hangeaiagent/aice_ps.git nanobanana
cd nanobanana

# 设置环境
conda activate AicePS
npm install

# 复制配置文件 (从本地)
scp -i /Users/a1/work/productmindai.pem .env ec2-user@54.89.140.250:/home/ec2-user/nanobanana/

# 启动应用
nohup npm run dev > app.log 2>&1 &
```

## 访问地址

- **本地开发**: http://localhost:8889/
- **生产环境**: https://nanobanana.gitagent.io/
- **服务器直连**: http://54.89.140.250:8889/

## 常用命令

```bash
# 查看应用状态
ps aux | grep npm

# 重启应用
pkill -f npm && nohup npm run dev > app.log 2>&1 &

# 查看日志
tail -f app.log

# 测试访问
curl -I https://nanobanana.gitagent.io
```

## 故障排除

| 问题 | 解决方案 |
|------|----------|
| 502 错误 | 检查应用是否在8889端口运行 |
| 403 错误 | 检查vite.config.ts中的allowedHosts |
| 端口冲突 | 使用固定端口8889，杀死占用进程 |
| SSL问题 | 检查证书有效期，重新运行certbot |

---
**快速联系**: 遇到问题请查看完整部署文档
