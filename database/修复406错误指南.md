# ğŸš¨ ä¿®å¤406é”™è¯¯ - ç«‹å³æ‰§è¡ŒæŒ‡å—

## å½“å‰é—®é¢˜
```
GET https://uobwbhvwrciaxloqdizc.supabase.co/rest/v1/pay_user_subscriptions?... 406 (Not Acceptable)
```

## ğŸ”§ ç«‹å³ä¿®å¤æ­¥éª¤

### æ­¥éª¤1ï¼šç™»å½•Supabase Dashboard
1. è®¿é—®ï¼šhttps://supabase.com/dashboard
2. é€‰æ‹©æ‚¨çš„é¡¹ç›®ï¼š`uobwbhvwrciaxloqdizc`
3. ç‚¹å‡»å·¦ä¾§èœå•çš„ "SQL Editor"

### æ­¥éª¤2ï¼šæ‰§è¡Œä¿®å¤è„šæœ¬
å¤åˆ¶ä»¥ä¸‹SQLä»£ç å¹¶åœ¨SQL Editorä¸­æ‰§è¡Œï¼š

```sql
-- å¿«é€Ÿä¿®å¤406é”™è¯¯
ALTER TABLE public.pay_subscription_plans ENABLE ROW LEVEL SECURITY;
ALTER TABLE public.pay_user_subscriptions ENABLE ROW LEVEL SECURITY;
ALTER TABLE public.pay_user_credits ENABLE ROW LEVEL SECURITY;

-- åˆ é™¤ç°æœ‰ç­–ç•¥
DROP POLICY IF EXISTS "pay_subscription_plans_read_policy" ON public.pay_subscription_plans;
DROP POLICY IF EXISTS "pay_user_subscriptions_read_policy" ON public.pay_user_subscriptions;
DROP POLICY IF EXISTS "pay_user_credits_read_policy" ON public.pay_user_credits;

-- åˆ›å»ºæ–°ç­–ç•¥
CREATE POLICY "allow_read_plans" ON public.pay_subscription_plans
    FOR SELECT TO public USING (true);

CREATE POLICY "allow_read_own_subscriptions" ON public.pay_user_subscriptions
    FOR SELECT TO authenticated USING (auth.uid() = user_id);

CREATE POLICY "allow_read_own_credits" ON public.pay_user_credits
    FOR SELECT TO authenticated USING (auth.uid() = user_id);

-- ç¡®ä¿å¥—é¤æ•°æ®å­˜åœ¨
INSERT INTO public.pay_subscription_plans (plan_code, plan_name, plan_name_en, price_monthly, price_yearly, credits_monthly, features, is_active, sort_order) VALUES
('free', 'å…è´¹ç‰ˆ', 'Free', 0.00, 0.00, 0, '{"nano_banana": false}', true, 1),
('starter', 'å…¥é—¨ç‰ˆ', 'Starter', 6.90, 69.00, 560, '{"nano_banana": true}', true, 2),
('advanced', 'è¿›é˜¶ç‰ˆ', 'Advanced', 19.90, 199.00, 1680, '{"nano_banana": true}', true, 3),
('professional', 'ä¸“ä¸šç‰ˆ', 'Professional', 29.90, 299.00, 4200, '{"nano_banana": true}', true, 4),
('lifetime', 'ä¹°æ–­ç‰ˆ', 'Lifetime', 399.00, 399.00, 4200, '{"nano_banana": true}', true, 5)
ON CONFLICT (plan_code) DO UPDATE SET
  plan_name = EXCLUDED.plan_name,
  price_monthly = EXCLUDED.price_monthly,
  credits_monthly = EXCLUDED.credits_monthly;

-- ä¸ºç°æœ‰ç”¨æˆ·åˆ›å»ºç§¯åˆ†è®°å½•
INSERT INTO public.pay_user_credits (user_id, total_credits, used_credits, available_credits, monthly_quota, quota_reset_date)
SELECT id, 100, 0, 100, 100, NOW() + INTERVAL '1 month'
FROM auth.users
WHERE id NOT IN (SELECT user_id FROM public.pay_user_credits WHERE user_id IS NOT NULL)
ON CONFLICT (user_id) DO NOTHING;
```

### æ­¥éª¤3ï¼šéªŒè¯ä¿®å¤
æ‰§è¡Œå®Œæˆåï¼Œåˆ·æ–°ç½‘é¡µï¼šhttps://nanobanana.gitagent.io/pricing

## âœ… é¢„æœŸç»“æœ
- ä»·æ ¼é¡µé¢æ­£å¸¸æ˜¾ç¤º
- ä¸å†å‡ºç°406é”™è¯¯
- PayPalæ”¯ä»˜æŒ‰é’®å¯ä»¥æ­£å¸¸ç‚¹å‡»

## ğŸ†˜ å¦‚æœä»æœ‰é—®é¢˜
1. æ£€æŸ¥SQLæ‰§è¡Œæ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯
2. ç¡®è®¤æ‚¨æœ‰é¡¹ç›®çš„ç®¡ç†å‘˜æƒé™
3. è”ç³»æŠ€æœ¯æ”¯æŒ

---
**é‡è¦**ï¼šè¯·ç«‹å³æ‰§è¡Œä¸Šè¿°SQLè„šæœ¬ä»¥ä¿®å¤406é”™è¯¯ï¼
